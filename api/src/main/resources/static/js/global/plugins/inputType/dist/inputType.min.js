!function(t){function e(t){t.filter("[data-i-type=int]").unbind(".intDeal").bind("keydown.intDeal keyup.intDeal blur.intDeal focus.intDeal",l),t.filter("[data-i-type=float]").unbind(".floatDeal").bind("keydown.floatDeal keyup.floatDeal blur.floatDeal focus.floatDeal",r)}function a(t){var e=t.filter("[data-i-type=year]");e.datepicker("remove"),e.datepicker({clearBtn:!0,autoclose:!0,format:"yyyy",minViewMode:2});var a=t.filter("[data-i-type=yearMonth]");a.datepicker("remove"),a.datepicker({clearBtn:!0,autoclose:!0,format:"yyyy-mm",minViewMode:1});var i=t.filter("[data-i-type=date]");i.datepicker("remove"),i.datepicker({clearBtn:!0,autoclose:!0,format:"yyyy-mm-dd",todayBtn:"linked",todayHighlight:!0});var s=t.filter("[data-i-type=dateCustom]");s.datepicker("remove"),s.datepicker({autoclose:!0})}function i(t){var e=t.filter("[data-i-type=dateMinute]");e.datetimepicker("remove"),e.datetimepicker({autoclose:!0,format:"yyyy-mm-dd hh:ii",bootcssVer:3,todayBtn:"linked",todayHighlight:!0});var a=t.filter("[data-i-type=dateSecond]");a.datetimepicker("remove"),a.datetimepicker({autoclose:!0,format:"yyyy-mm-dd hh:ii:ss",todayBtn:"linked",bootcssVer:3,todayHighlight:!0});var i=t.filter("[data-i-type=datetimeCustom]");i.datetimepicker("remove"),i.datetimepicker({autoclose:!0,bootcssVer:3})}function s(e){var a=e.filter("[data-i-type=dateRange]"),i={};i[t.iType.i18n.today]=[moment(),moment()],i[t.iType.i18n.yesterday]=[moment().subtract("days",1),moment().subtract("days",1)],i[t.iType.i18n.last7days]=[moment().subtract("days",6),moment()],i[t.iType.i18n.last30days]=[moment().subtract("days",29),moment()],i[t.iType.i18n.thisMonth]=[moment().startOf("month"),moment().endOf("month")],i[t.iType.i18n.lastMonth]=[moment().subtract("month",1).startOf("month"),moment().subtract("month",1).endOf("month")],a.daterangepicker({autoUpdateInput:!1,showDropdowns:!0,alwaysShowCalendars:!0,applyClass:"green",locale:{format:"YYYY-MM-DD",applyLabel:t.iType.i18n.applyLabel,cancelLabel:t.iType.i18n.cancelLabel,weekLabel:t.iType.i18n.weekLabel,customRangeLabel:t.iType.i18n.customRangeLabel},ranges:i,startDate:moment(),endDate:moment()}).on("apply.daterangepicker",function(e,a){var i,s=a.startDate.format("YYYY-MM-DD"),l=a.endDate.format("YYYY-MM-DD");i=t(this).is("input")?t(this):t(this).find("input"),i.val(s+" "+t.iType.i18n.to+" "+l).data("from",s).data("to",l)}).on("cancel.daterangepicker",function(e,a){var i;i=t(this).is("input")?t(this):t(this).find("input"),i.val("").data("from","").data("to","")})}function l(e){if(!t(this).attr("readonly")){var a=e.type,i=t(this).attr("max"),s=t(this).attr("min"),l=t(this).attr("changeRange"),r=t(this).attr("defaultVal");if("keydown"==a){l=void 0==l?1:parseInt(l,10);var o=e.which;if(e.shiftKey)return!1;if(e.ctrlKey)return!0;if(38==o&&this.value.isNotEmpty()&&(void 0==i||void 0!=i&&parseInt(this.value,10)+l<=parseInt(i,10)))return this.value=parseInt(this.value,10)+l,!0;if(40==o&&this.value.isNotEmpty()&&(void 0==s||void 0!=s&&parseInt(this.value,10)-l>=parseInt(s,10)))return"positive"==t(this).attr("positive")&&parseInt(this.value,10)-l<"0"?!0:(this.value=parseInt(this.value,10)-l,!0);var n=this.value,h=n.length,u=commonUtil.getPositionForInput(this);return(110==o||190==o)&&h>=2&&"00"==n.substring(h-2)?commonUtil.setPositionForInput(this,u):u==h-1&&"00"!=n.substring(h-2)?commonUtil.setPositionForInput(this,u):u==h-1&&"00"==n.substring(h-2),37==o||39==o||8==o||46==o||9==o?!0:57>=o&&o>=48||o>=96&&105>=o?void 0==i||this.value!=i||commonUtil.getSelectText(this).length>0:229==o?!0:(109!=o&&189!=o||"positive"==t(this).attr("positive")||(this.value="-"+this.value.replace("-","")),!1)}if("keyup"==a){if(o=e.which,37==o||39==o||8==o||46==o||9==o)return!0;-1!=this.value.search(/[^\d\-]/)&&(this.value=this.value.replace(/[^\d\-]/g,"")),void 0!=i&&parseInt(this.value,10)>parseFloat(i)&&(this.value=i)}if("blur"==a||"mouseout"==a){-1!=this.value.search(/[^\d\-]/)&&(this.value=this.value.replace(/[^\d\-]/g,""));var v=this.value;-1!=v.indexOf("-")&&(this.value="-"+v.replace(/\-/g,"")),"-"==this.value&&(this.value=""),"positive"==t(this).attr("positive")&&t(this).val(this.value.replace(/\-/g,"")),void 0!=s&&parseInt(this.value,10)<parseFloat(s)&&(this.value=s),this.value=""==this.value?"":parseInt(this.value,10),"0"!=this.value&&""!=this.value||void 0==r||(this.value=r)}"focus"==a&&this.select()}}function r(e){if(!t(this).attr("readonly")){var a=e.type,i=t(this).attr("max"),s=t(this).attr("min"),l=t(this).attr("changeRange"),r=t(this).attr("positive"),o=t(this).attr("precision"),n=t(this).attr("toFix"),h=t(this).attr("noZero"),u=t(this).attr("defaultVal");if("keydown"==a){l=void 0==l?1:parseInt(l,10);var v=e.which;if(e.shiftKey)return!1;if(38==v&&this.value.isNotEmpty()&&(void 0==i||void 0!=i&&parseFloat(this.value)+l<=parseFloat(i))){var p=this.value.split(".");return p[0]=parseInt(p[0],10)+l,this.value=1==p.length?p[0]:p[0]+"."+p[1],!0}if(40==v&&this.value.isNotEmpty()&&(void 0==s||void 0!=s&&parseFloat(this.value)-l>=parseFloat(s))){var d=parseFloat(this.value)-l;if("positive"==t(this).attr("positive")&&0>d)return!0;var c=this.value.split(".");return c[0]=parseInt(c[0],10)-l,this.value=1==c.length?c[0]:c[0]+"."+c[1],!0}return 37==v||39==v||8==v||46==v||9==v||35==v||36==v?!0:57>=v&&v>=48||v>=96&&105>=v?(void 0==i||this.value!=i)&&(void 0==o||this.value.split(".").length<2||this.value.split(".")[1].length!=parseInt(o,10)||commonUtil.getPositionForInput(this)<this.value.indexOf(".")+1||commonUtil.getSelectText(this).length>0):110==v||190==v?-1==this.value.indexOf("."):229==v?!0:(109!=v&&189!=v||"positive"==r||(this.value="-"+this.value.replace("-","")),!1)}if("keyup"==a){if(v=e.which,37==v||39==v||8==v||46==v||9==v)return!0;-1!=this.value.search(/[^\d\-\.]/)&&(this.value=this.value.replace(/[^\d\-\.]/g,"")),void 0!=i&&parseFloat(this.value)>parseFloat(i)&&(this.value=i)}if("blur"==a){var y=this.value;-1!=y.search(/[^\d\-\.]/)&&(this.value=y.replace(/[^\d\-\.]/g,"")),y=this.value,-1!=y.indexOf("-")&&(this.value="-"+y.replace(/\-/g,"")),y=this.value;var m=y.lastIndexOf(".");m!=y.indexOf(".")&&(this.value=y.substring(0,m).replace(/\./g,"")+y.substring(m)),y=this.value,0!=y.indexOf(".")&&y.indexOf(".")+1!=y.length||(this.value=y.replace(/\./g,"")),this.value="-"==this.value?"":this.value,y=this.value,"positive"==r&&-1!=y.indexOf("_")&&(this.value=y.replace(/\-/g,"")),y=this.value,void 0!=s&&parseFloat(y)<parseFloat(s)&&(this.value=s),y=this.value,"noZero"==h&&0==parseFloat(y)&&(this.value=""),y=this.value,void 0!=o&&-1!=y.indexOf(".")&&(y=parseFloat(y.substring(0,y.indexOf(".")+parseInt(o,10)+1)),this.value=y),""!=this.value&&void 0!=o&&"toFix"==n?this.value=parseFloat(this.value).toFixed(o):""!=this.value&&(this.value=parseFloat(y)),"0"!=this.value&&""!=this.value||void 0==u||(this.value=u)}"focus"==a&&this.select()}}t.fn.extend({iType:function(){var l=t(this);e(l),t().datepicker&&a(l),t().datetimepicker&&i(l),t().daterangepicker&&s(l)}}),t.iType=function(){t("[data-i-type]").iType()},t.iType.i18n={to:"To",today:"Today",yesterday:"Yesterday",last7days:"Last 7 Days",last30days:"Last 30 Days",thisMonth:"This Month",lastMonth:"Last Month",applyLabel:"apply",cancelLabel:"cancel",weekLabel:"W",customRangeLabel:"Custom Range"}}(jQuery);